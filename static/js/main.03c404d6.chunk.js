(this.webpackJsonptodo_list_react=this.webpackJsonptodo_list_react||[]).push([[0],{45:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var o=c(13),n=c.n(o),s=c(37),r=c.n(s),i=c(15),a=(c(45),c(29));c(53),c(48),c(54);a.a.initializeApp({apiKey:"AIzaSyCzThX_ZWlBgZOzCzgY0mDNH8lZ6tnd05k",authDomain:"todo-list-91421.firebaseapp.com",projectId:"todo-list-91421",storageBucket:"todo-list-91421.appspot.com",messagingSenderId:"750356644344",appId:"1:750356644344:web:c64e71cc0ffba3f9cf960d"});var l=a.a.auth(),d=a.a.firestore(),u=a.a,j=c(12);var b=function(e){var t=Object(o.useState)(e.edit?e.edit.value:""),c=Object(i.a)(t,2),n=c[0],s=c[1],r=d.collection("users/".concat(l.currentUser.uid,"/todos")),a=Object(o.useRef)(null);Object(o.useEffect)((function(){a.current.focus()}));var b=function(e){s(e.target.value)},m=function(e){e.preventDefault(),n&&!/^\s*$/.test(n)&&(r.add({text:n,complete:!1,createdAt:u.firestore.FieldValue.serverTimestamp()}),s(""))};return Object(j.jsx)("form",{onSubmit:m,className:"todo-form",children:e.edit?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{placeholder:"Update your item",value:n,onChange:b,name:"text",ref:a,className:"todo-input edit"}),Object(j.jsx)("button",{onClick:function(t){t.preventDefault(),n&&!/^\s*$/.test(n)&&(r.doc(e.edit.id).delete(),r.add({text:n,complete:!1,createdAt:u.firestore.FieldValue.serverTimestamp()}),e.onSubmit({edit:!1}),s(""))},className:"todo-button edit",children:"Update"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{placeholder:"Add a todo",value:n,onChange:b,name:"text",className:"todo-input",ref:a}),Object(j.jsx)("button",{onClick:m,className:"todo-button",children:"Add todo"})]})})},m=c(38),p=c(39),O=c(28),f=function(e){var t=e.completeTodo,c=e.removeTodo,n=d.collection("users/".concat(l.currentUser.uid,"/todos")),s=Object(O.a)(n,{idField:"id"}),r=Object(i.a)(s,1)[0],a=Object(o.useState)({id:null,value:""}),u=Object(i.a)(a,2),f=u[0],h=u[1];return f.id?Object(j.jsx)(b,{edit:f,onSubmit:function(){h({id:null,value:""})}}):r?Object(j.jsx)("div",{className:"todo-list",children:r.map((function(e){return Object(j.jsxs)("div",{className:e.complete?"todo-row complete":"todo-row",children:[Object(j.jsx)("div",{className:"todo-name",onClick:function(){return t(e.id)},children:e.text},e.id),Object(j.jsxs)("div",{className:"icons",children:[Object(j.jsx)(m.a,{onClick:function(){return c(e.id)},className:"delete-icon"}),Object(j.jsx)(p.a,{onClick:function(){return h({id:e.id,value:e.text})},className:"edit-icon"})]})]})}))}):null};c(51);var h=function(e){return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{children:"Your progress bar!"}),Object(j.jsxs)("div",{className:"progressbar-container",children:[Object(j.jsx)("div",{className:"progressbar-complete",style:{width:"".concat(e.progress,"%")},children:Object(j.jsx)("div",{className:"progressbar-liquid"})}),Object(j.jsxs)("span",{className:"progress",children:[e.progress?e.progress:0," %"]})]})]})};var x=function(){var e=d.collection("users/".concat(l.currentUser.uid,"/todos")),t=d.collection("users/".concat(l.currentUser.uid,"/data")),c=Object(o.useState)(0),n=Object(i.a)(c,2),s=n[0],r=n[1],a=Object(O.a)(e,{idField:"id"}),u=Object(i.a)(a,1)[0],m=Object(O.a)(t);return Object(i.a)(m,1)[0],Object(j.jsxs)(j.Fragment,{children:[console.log("1",u||null),Object(j.jsx)("h1",{children:"What's the plan for Today?"}),Object(j.jsx)(b,{}),console.log("before",u||null),Object(j.jsx)(f,{completeTodo:function(c){u.map((function(o){o.id===c&&(console.log("2",u||null),e.doc(o.id).set({complete:!o.complete},{merge:!0}),r(o.complete?s+1:s-1),t&&t.set({currentCompleted:s}))}))},removeTodo:function(t){e.doc(t).delete()}}),console.log("after",u||null),console.log(u?u.length:null,u?s:null),Object(j.jsx)(h,{progress:Math.round(u?1e4*u.length/100:0)})]})},g=(c.p,c(40)),v=function(){return l.signInWithPopup(new u.auth.GoogleAuthProvider)},N=function(){return Object(j.jsx)("main",{children:Object(j.jsx)("button",{onClick:v,children:"Sign In With Google"})})},C=function(){return l.signOut()};var k=function(){var e=Object(g.a)(l);return Object(i.a)(e,1)[0]?Object(j.jsxs)("div",{className:"main-component",children:[Object(j.jsx)("div",{className:"todo-app",children:Object(j.jsx)(x,{})}),Object(j.jsx)("button",{onClick:C,children:"Sign Out"})]}):Object(j.jsx)(N,{})};r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.03c404d6.chunk.js.map